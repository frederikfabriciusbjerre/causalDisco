% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/causalDisco_search.R
\name{causalDiscoSearch}
\alias{causalDiscoSearch}
\title{Class for causalDisco search algorithms}
\description{
Class for causalDisco search algorithms

Class for causalDisco search algorithms
}
\details{
This class implements the search algorithms from the causalDisco package,
which wraps and adds temporal order to pcalg algorithms.
It allows to set the data, sufficient statistics, test, score, and algorithm.
}
\examples{
### causalDisco_search R6 class example ###

# Generally, we do not recommend using the R6 classes directly, but rather
# use the disco() or any method function, for example pc(), instead.

data(tpcExample)

# small toy dataset
dat <- head(tpcExample, 50)

# background knowledge (tiers + one exogenous var)
kn <- knowledge(
  dat,
  tier(
    child ~ starts_with("child"),
    youth ~ starts_with("youth"),
    old ~ starts_with("oldage")
  )
)

# --- Constraint-based: TPC ----------------------------------------------------
s_tpc <- causalDiscoSearch$new()
s_tpc$set_params(list(verbose = FALSE))
s_tpc$set_test("fisher_z", alpha = 0.2)
s_tpc$set_alg("tpc")
s_tpc$set_knowledge(kn, directed_as_undirected = TRUE)
s_tpc$set_data(dat)
res_tpc <- s_tpc$run_search() # returns a discography-like result
print(res_tpc)

# Switch to TFCI on the same object (reuses suff_stat/test)
s_tpc$set_alg("tfci")
res_tfci <- s_tpc$run_search()
print(res_tfci)

# --- Score-based: TGES --------------------------------------------------------
s_tges <- causalDiscoSearch$new()
s_tges$set_score("tbic") # Gaussian temporal score
s_tges$set_alg("tges")
s_tges$set_data(dat, set_suff_stat = FALSE) # suff stat not used for TGES
s_tges$set_knowledge(kn)
# res_tges <- s_tges$run_search() # todo: TGES fails sometimes.
# print(res_tges)

# --- Intentional error demonstrations ----------------------------------------

# run_search() without setting an algorithm
try(causalDiscoSearch$new()$run_search(dat))

# set_suff_stat() requires data and test first
s_err <- causalDiscoSearch$new()
try(s_err$set_suff_stat()) # no data & no test
s_err$set_data(dat, set_suff_stat = FALSE)
try(s_err$set_suff_stat()) # no test

# unknown test / score / algorithm
try(causalDiscoSearch$new()$set_test("not_a_test"))
try(causalDiscoSearch$new()$set_score("not_a_score"))
try(causalDiscoSearch$new()$set_alg("not_an_alg"))

# set_knowledge() requires a `knowledge` object
try(causalDiscoSearch$new()$set_knowledge(list(not = "knowledge")))
}
\seealso{
\code{\link[causalDisco:knowledge]{knowledge}}.
}
\section{Public fields}{
\if{html}{\out{<div class="r6-fields">}}
\describe{
\item{\code{data}}{A \code{data.frame} holding the data set currently attached to the
search object. Can be set with \code{set_data()}.}

\item{\code{score}}{A function that will be used to build the score,
when data is set. Can be set with \code{$set_score()}. Recognized values
are:
\itemize{
\item \code{tbic} - Temporal BIC score for Gaussian data.
See \code{\link[causalDisco:TemporalBIC-class]{TemporalBIC}}
\item \code{tbdeu} - Temporal BDeu score for discrete data.
See \code{\link[causalDisco:TemporalBDeu-class]{TemporalBDeu}}.
}}

\item{\code{test}}{A function that will be used to test independence.
Can be set with \code{$set_test()}. Recognized values are:
\itemize{
\item \code{fisher_z} - Fisher Z test for Gaussian data.
See \code{\link[causalDisco:corTest]{corTest}}.
\item \code{reg} - Regression test for discrete or binary data.
See \code{\link[causalDisco:regTest]{regTest}}.
}}

\item{\code{alg}}{A function that will be used to run the search algorithm.
Can be set with \code{$set_alg()}. Recognized values are:
\itemize{
\item \code{tpc}  - TPC algorithm.
See \code{\link[causalDisco:tpc]{tpc}}.
\item \code{tfci} - TFCI algorithm.
See \code{\link[causalDisco:tfci]{tfci}}.
\item \code{tges} - TGES algorithm.
See \code{\link[causalDisco:tges]{tges}}.
}}

\item{\code{params}}{A list of parameters for the test and algorithm.
Can be set with \code{$set_params()}.
TODO: not secure yet in terms of distributing arguments.
Use with caution.}

\item{\code{suff_stat}}{Sufficient statistic. The format and contents of the
sufficient statistic depends on which test is being used.}

\item{\code{knowledge}}{A \code{knowledge} object holding background knowledge.}
}
\if{html}{\out{</div>}}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-causalDiscoSearch-new}{\code{causalDiscoSearch$new()}}
\item \href{#method-causalDiscoSearch-set_params}{\code{causalDiscoSearch$set_params()}}
\item \href{#method-causalDiscoSearch-set_data}{\code{causalDiscoSearch$set_data()}}
\item \href{#method-causalDiscoSearch-set_suff_stat}{\code{causalDiscoSearch$set_suff_stat()}}
\item \href{#method-causalDiscoSearch-set_test}{\code{causalDiscoSearch$set_test()}}
\item \href{#method-causalDiscoSearch-set_score}{\code{causalDiscoSearch$set_score()}}
\item \href{#method-causalDiscoSearch-set_alg}{\code{causalDiscoSearch$set_alg()}}
\item \href{#method-causalDiscoSearch-set_knowledge}{\code{causalDiscoSearch$set_knowledge()}}
\item \href{#method-causalDiscoSearch-run_search}{\code{causalDiscoSearch$run_search()}}
\item \href{#method-causalDiscoSearch-clone}{\code{causalDiscoSearch$clone()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-causalDiscoSearch-new"></a>}}
\if{latex}{\out{\hypertarget{method-causalDiscoSearch-new}{}}}
\subsection{Method \code{new()}}{
Constructor for the \code{causalDiscoSearch} class.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{causalDiscoSearch$new()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-causalDiscoSearch-set_params"></a>}}
\if{latex}{\out{\hypertarget{method-causalDiscoSearch-set_params}{}}}
\subsection{Method \code{set_params()}}{
Sets the parameters for the test and algorithm.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{causalDiscoSearch$set_params(params)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{params}}{A list of parameters to set.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-causalDiscoSearch-set_data"></a>}}
\if{latex}{\out{\hypertarget{method-causalDiscoSearch-set_data}{}}}
\subsection{Method \code{set_data()}}{
Sets the data for the search algorithm.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{causalDiscoSearch$set_data(data, set_suff_stat = TRUE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{data}}{A \code{data.frame} or a \code{matrix} containing the data.}

\item{\code{set_suff_stat}}{Logical; whether to set the sufficient statistic.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-causalDiscoSearch-set_suff_stat"></a>}}
\if{latex}{\out{\hypertarget{method-causalDiscoSearch-set_suff_stat}{}}}
\subsection{Method \code{set_suff_stat()}}{
Sets the sufficient statistic for the data.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{causalDiscoSearch$set_suff_stat()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-causalDiscoSearch-set_test"></a>}}
\if{latex}{\out{\hypertarget{method-causalDiscoSearch-set_test}{}}}
\subsection{Method \code{set_test()}}{
Sets the test for the search algorithm.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{causalDiscoSearch$set_test(method, alpha = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{method}}{A string specifying the type of test to use.}

\item{\code{alpha}}{Significance level for the test.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-causalDiscoSearch-set_score"></a>}}
\if{latex}{\out{\hypertarget{method-causalDiscoSearch-set_score}{}}}
\subsection{Method \code{set_score()}}{
Sets the score for the search algorithm.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{causalDiscoSearch$set_score(method, params = list())}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{method}}{A string specifying the type of score to use.}

\item{\code{params}}{A list of parameters to pass to the score function.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-causalDiscoSearch-set_alg"></a>}}
\if{latex}{\out{\hypertarget{method-causalDiscoSearch-set_alg}{}}}
\subsection{Method \code{set_alg()}}{
Sets the algorithm for the search.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{causalDiscoSearch$set_alg(method)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{method}}{A string specifying the type of algorithm to use.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-causalDiscoSearch-set_knowledge"></a>}}
\if{latex}{\out{\hypertarget{method-causalDiscoSearch-set_knowledge}{}}}
\subsection{Method \code{set_knowledge()}}{
Sets the background knowledge for the search with a \code{knowledge} object.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{causalDiscoSearch$set_knowledge(kn, directed_as_undirected = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{kn}}{A \code{knowledge} object.}

\item{\code{directed_as_undirected}}{Logical; whether to treat directed edges in
the knowledge as undirected. Default is \code{FALSE}. This is due to the
nature of how \code{pcalg} handles background knowledge when using
\code{\link[pcalg:skeleton]{skeleton}} under the hood in
\code{\link[causalDisco:tpc]{tpc}} and
\code{\link[causalDisco:tfci]{tfci}}.}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-causalDiscoSearch-run_search"></a>}}
\if{latex}{\out{\hypertarget{method-causalDiscoSearch-run_search}{}}}
\subsection{Method \code{run_search()}}{
Runs the search algorithm on the data.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{causalDiscoSearch$run_search(data = NULL, set_suff_stat = TRUE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{data}}{A \code{data.frame} or a \code{matrix} containing the data.}

\item{\code{set_suff_stat}}{Logical; whether to set the sufficient statistic}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-causalDiscoSearch-clone"></a>}}
\if{latex}{\out{\hypertarget{method-causalDiscoSearch-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{causalDiscoSearch$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
